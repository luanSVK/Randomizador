<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sorteador de personagens Marvel Rivals">
  <title>Sortear Personagem Marvel Rivals</title>
  
  <link rel="icon" href="https://videos.openai.com/az/vg-assets/task_01kgr7nd24ffktw5a10t1gtt6d%2F1770339899_img_0.webp?se=2026-02-12T00%3A00%3A00Z&sp=r&sv=2026-02-06&sr=b&skoid=cfbc986b-d2bc-4088-8b71-4f962129715b&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2026-02-06T00%3A46%3A20Z&ske=2026-02-13T00%3A51%3A20Z&sks=b&skv=2026-02-06&sig=vOtT12Chkz%2BwZ5ajGcMjV651/OFnwE2g5F7uhgRA3Ec%3D&ac=oaivgprodscus2" type="image/png">

  <!-- Biblioteca de Confete -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.0/dist/confetti.browser.min.js"></script>

  <style>
    /* ===== RESET E GERAL ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      min-height: 100vh;
      background: url('https://i.pinimg.com/736x/5f/33/fc/5f33fc9544e4ea854ded0353dd59aad8.jpg') center/cover no-repeat fixed;
      position: relative;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    /* Overlay escuro para melhor legibilidade */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: -1;
    }

    /* Container principal */
    .container {
      z-index: 1;
      max-width: 600px;
      width: 100%;
    }

    /* ===== T√çTULO ===== */
    h1 {
      font-size: 3em;
      margin-bottom: 40px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      letter-spacing: 1px;
      animation: slideDown 0.6s ease-out;
    }

    /* ===== BOT√ÉO ===== */
    button {
      font-size: 20px;
      padding: 15px 50px;
      cursor: pointer;
      margin: 20px 0;
      background-color: #ff3d00;
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    button:hover:not(:disabled) {
      background-color: #ff6e40;
      transform: scale(1.08);
      box-shadow: 0 8px 25px rgba(255, 61, 0, 0.4);
    }

    button:active:not(:disabled) {
      transform: scale(0.98);
    }

    /* Estado desabilitado durante sorteio */
    button:disabled {
      background-color: #999;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* ===== RESULTADO ===== */
    #resultado {
      margin-top: 30px;
      min-height: 380px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #resultado h2 {
      font-size: 2.5em;
      margin-bottom: 20px;
      color: #ffd700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      animation: popIn 0.5s ease-out;
    }

    #resultado img {
      width: 230px;
      max-width: 90%;
      height: auto;
      border: 4px solid #fff;
      border-radius: 15px;
      opacity: 0;
      transition: opacity 0.6s ease, transform 0.6s ease;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }

    #resultado img.mostrar {
      opacity: 1;
      transform: scale(1);
    }

    /* Mensagem de carregamento */
    .carregando {
      font-size: 1.5em;
      animation: pulse 1.5s infinite;
    }

    /* Mensagem de erro */
    .erro {
      color: #ff6b6b;
      font-size: 1.2em;
      padding: 15px;
      background-color: rgba(255, 107, 107, 0.2);
      border-radius: 8px;
      border-left: 4px solid #ff6b6b;
    }

    /* ===== ANIMA√á√ïES ===== */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes popIn {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }



    /* ===== HIST√ìRICO ===== */
    .historico-container {
      margin-top: 30px;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 12px;
      max-width: 100%;
    }

    .historico-title {
      font-size: 1.2em;
      margin-bottom: 15px;
      color: #ffd700;
    }

    .historico-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      max-height: 150px;
      overflow-y: auto;
    }

    .historico-item {
      background-color: rgba(255, 61, 0, 0.3);
      border: 2px solid #ff3d00;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .historico-item:hover {
      background-color: rgba(255, 61, 0, 0.6);
      transform: scale(1.05);
    }

    .historico-item small {
      display: block;
      font-size: 0.8em;
      color: #ccc;
      margin-top: 3px;
    }

    /* ===== BOT√ïES DE A√á√ÉO ===== */
    .acoes-container {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn-acao {
      font-size: 16px;
      padding: 10px 20px;
      cursor: pointer;
      background-color: #4CAF50;
      border: none;
      border-radius: 8px;
      color: white;
      transition: all 0.3s ease;
      font-weight: bold;
    }

    .btn-acao:hover:not(:disabled) {
      background-color: #45a049;
      transform: scale(1.05);
    }

    .btn-acao:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }



    /* ===== DICA DE ATALHO ===== */
    .dica-atalho {
      font-size: 0.9em;
      color: #ccc;
      margin-top: 15px;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* ===== RESPONSIVIDADE ===== */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.2em;
        margin-bottom: 30px;
      }

      button {
        font-size: 18px;
        padding: 12px 35px;
      }

      #resultado h2 {
        font-size: 1.8em;
      }

      #resultado img {
        width: 180px;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.8em;
        margin-bottom: 20px;
      }

      button {
        font-size: 16px;
        padding: 12px 30px;
        width: 90%;
      }

      #resultado {
        min-height: 300px;
      }

      #resultado h2 {
        font-size: 1.5em;
        margin-bottom: 15px;
      }

      #resultado img {
        width: 150px;
        border: 3px solid #fff;
      }

    }
  </style>
</head>

<body>
  <div class="container">
    <h1> Quem √© seu personagem? </h1>
    <button id="sortear" aria-label="Sortear um personagem da Marvel">Sortear Personagem</button>
    <p class="dica-atalho">üí° Dica: Pressione ENTER para sortear rapidamente</p>
    <div id="resultado"></div>
    <div id="historico" class="historico-container" style="display: none;">
      <div class="historico-title">üìú Hist√≥rico</div>
      <div id="historico-list" class="historico-list"></div>
    </div>
    <div class="acoes-container" id="acoes" style="display: none;">
      <button class="btn-acao" id="limpar-historico" title="Limpar hist√≥rico">üîÑ Limpar Hist√≥rico</button>
    </div>
  </div>

  <script>
    // ===== DADOS DOS PERSONAGENS =====
    const personagens = [
      { nome: "Homem Aranha", img: "https://i.pinimg.com/736x/91/76/e0/9176e0346a7f79ccf8d4d9747bf03274.jpg" },
      { nome: "Penny", img: "https://i.pinimg.com/736x/11/ac/25/11ac253f36b51d7c593225c26f6d13a3.jpg" },
      { nome: "Tocha", img: "https://i.pinimg.com/736x/87/3b/85/873b85c1bde526d50b55d01a6638507c.jpg" },
      { nome: "Blade", img: "https://i.pinimg.com/1200x/d8/66/64/d86664c0db7babaed734c9a2245998ce.jpg" },
      { nome: "Magia", img: "https://i.pinimg.com/736x/c1/0f/10/c10f1046aebaeb1571d8787e85a26ef5.jpg" },
      { nome: "Doutor Estranho", img: "https://i.pinimg.com/736x/ae/78/a0/ae78a0f3ee2e3d883650e57de078c090.jpg" },
      { nome: "Deadpool Cura", img: "https://i.pinimg.com/736x/f7/9b/78/f79b78e29fe162e3c782558a1c5458ef.jpg" },
      { nome: "Adam", img: "https://i.pinimg.com/736x/ac/09/05/ac090546895abc6fcf3543a72f799ce9.jpg" },
      { nome: "Deadpool Tank", img: "https://i.pinimg.com/736x/f7/9b/78/f79b78e29fe162e3c782558a1c5458ef.jpg" },
      { nome: "Angela", img: "https://i.pinimg.com/1200x/c6/30/b9/c630b933d62e06d04e686e37f6ee8b77.jpg" },
      { nome: "Pantera", img: "https://i.pinimg.com/1200x/4c/27/5e/4c275e89de1812e31bdde11bfdee6fba.jpg" },
      { nome: "Vi√∫va", img: "https://i.pinimg.com/736x/7a/bb/88/7abb88a7d868a4455aca6a97ca10141c.jpg" },
      { nome: "Hulk", img: "https://i.pinimg.com/736x/d4/36/85/d43685da1ab5b045c1c11bf250e8f6cb.jpg" },
      { nome: "Capit√£o", img: "https://i.pinimg.com/736x/80/8a/26/808a265bf53e1b58fdbe58054916f050.jpg" },
      { nome: "Manto", img: "https://i.pinimg.com/736x/7b/f1/f0/7bf1f03e208a6f068f0fe63f1726c6a3.jpg" },
      { nome: "Groot", img: "https://i.pinimg.com/736x/20/46/97/204697b775dfdf7140fa505dc20ccf6b.jpg" },
      { nome: "Thor", img: "https://i.pinimg.com/736x/1b/9c/9f/1b9c9fcbe39bcae51a3bdc1f697c5fdd.jpg" },
      { nome: "Demolidor", img: "https://i.pinimg.com/736x/8d/2a/c0/8d2ac0611fba4ab9f74fa1a1f279694d.jpg" },
      { nome: "Deadpool", img: "https://i.pinimg.com/736x/f7/9b/78/f79b78e29fe162e3c782558a1c5458ef.jpg" },
      { nome: "Emma", img: "https://i.pinimg.com/736x/f7/51/fa/f751fafaec8f3a552e855d2800c3d1cc.jpg" },
      { nome: "Gambit", img: "https://i.pinimg.com/736x/5c/10/3b/5c103bfb0e117b6126842b9423e2bb77.jpg" },
      { nome: "Vampira", img: "https://i.pinimg.com/736x/33/45/a9/3345a91f22f8ae9d265d6f768ad772fa.jpg" },
      { nome: "Gavi√£o", img: "https://i.pinimg.com/736x/7e/ce/b0/7eceb03a12716b15378bf73ade2ac9ed.jpg" },
      { nome: "Invis√≠vel", img: "https://i.pinimg.com/1200x/2a/25/cf/2a25cfe84353ba3c89c9066a7d6c1685.jpg" },
      { nome: "Luna Snow", img: "https://i.pinimg.com/736x/2e/88/95/2e8895d23178ae8f99541e9924c163ed.jpg" },
      { nome: "Cavaleiro", img: "https://i.pinimg.com/1200x/eb/9a/67/eb9a67ce89b599232034e208e95a620a.jpg" },
      { nome: "Mantis", img: "https://i.pinimg.com/736x/b2/0b/6e/b20b6e4bd2d3f6a7323af09d1dffce71.jpg" },
      { nome: "Homem de Ferro", img: "https://i.pinimg.com/736x/86/a0/b0/86a0b02bf748d0391ba29ba34d541d67.jpg" },
      { nome: "Punho de Ferro", img: "https://i.pinimg.com/736x/87/3b/85/873b85c1bde526d50b55d01a6638507c.jpg" },
      { nome: "Jeff", img: "https://i.pinimg.com/1200x/af/09/f4/af09f4f0a5c0f1b5e0243b0529316a31.jpg" },
      { nome: "Hela", img: "https://i.pinimg.com/736x/f5/3c/0d/f53c0d31d045dbfa3ba8cbf4b6d7118d.jpg" },
      { nome: "Loki", img: "https://i.pinimg.com/1200x/16/b8/3c/16b83c900b32e9ce9eca2bf4edabc321.jpg" },
      { nome: "Magneto", img: "https://i.pinimg.com/736x/a2/75/bd/a275bd6e971f9297b5595e7a05b84d06.jpg" },
      { nome: "Psylocke", img: "https://i.pinimg.com/736x/7f/f9/e5/7ff9e570e4038a2b798dcdc747a17f7f.jpg" },
      { nome: "Feiticeira", img: "https://i.pinimg.com/736x/b5/cd/20/b5cd20899aa1a2527a3cbc51cd9396ef.jpg" },
      { nome: "Coisa", img: "https://i.pinimg.com/736x/50/c8/db/50c8dbdc347025fc2033f7e2b0a2e57f.jpg" },
      { nome: "Justiceiro", img: "https://i.pinimg.com/736x/03/b1/3e/03b13ed1cdcdb278259b352db9f8948d.jpg" },
      { nome: "Tempestade", img: "https://i.pinimg.com/736x/5a/35/f9/5a35f97f378b8cf6d90b73222dbd9ccf.jpg" },
      { nome: "Star Lord", img: "https://i.pinimg.com/1200x/1a/b4/e6/1ab4e671d8df8c3aecc61402dfbb591f.jpg" },
      { nome: "Garota Esquilo", img: "https://i.pinimg.com/736x/0e/2f/a5/0e2fa55a89b296aa1a9042124630c2de.jpg" },
      { nome: "Namor", img: "https://i.pinimg.com/736x/7a/2b/be/7a2bbef91315f07755f97ec309b19e6a.jpg" },
      { nome: "F√™nix", img: "https://i.pinimg.com/736x/e4/c8/f8/e4c8f8601cac71bebff81be1bcbfd658.jpg" },
      { nome: "Ultron", img: "https://i.pinimg.com/736x/a0/1c/87/a01c870543365d6a266c7bd5ff6a711c.jpg" },
      { nome: "Venom", img: "https://i.pinimg.com/1200x/b6/d8/b9/b6d8b942de447b673c70ec51b5b0c4b7.jpg" },
      { nome: "Soldado Invernal", img: "https://i.pinimg.com/736x/6a/36/98/6a3698814307ccf33a3c4a528febd7a7.jpg" },
      { nome: "Wolverine", img: "https://i.pinimg.com/736x/85/f6/a1/85f6a1a4f9844360264c03f7c6b9d02f.jpg" },
      { nome: "Borracha", img: "https://i.pinimg.com/1200x/f6/79/0a/f6790a61a65b0e4f59cf8d7a086d19b9.jpg" },
      { nome: "Rocket", img: "https://i.pinimg.com/736x/1d/c6/42/1dc642c6a85add8ec19c4503657faaa0.jpg" }
    ];

    // ===== ELEMENTOS DO DOM =====
    const botao = document.getElementById("sortear");
    const resultado = document.getElementById("resultado");
    const historicoDiv = document.getElementById("historico");
    const historicoList = document.getElementById("historico-list");
    const acoes = document.getElementById("acoes");
    const btnLimparHistorico = document.getElementById("limpar-historico");
    
    let ultimoIndex = -1;
    let esta_sorteando = false;
    let ultimoPersonagemSorteado = null;
    let historico = [];
    let contadores = {};
    const historicoMaximo = 10;

    // ===== CARREGAR DADOS DO LOCALSTORAGE =====
    function carregarDados() {
      const dados = localStorage.getItem('sorteadorMarvel');
      if (dados) {
        const obj = JSON.parse(dados);
        historico = obj.historico || [];
        contadores = obj.contadores || {};
      }
    }

    // ===== SALVAR DADOS NO LOCALSTORAGE =====
    function salvarDados() {
      localStorage.setItem('sorteadorMarvel', JSON.stringify({ historico, contadores }));
    }

    // ===== ATUALIZAR HIST√ìRICO VISUAL =====
    function atualizarHistoricoVisual() {
      if (historico.length === 0) {
        historicoDiv.style.display = 'none';
        acoes.style.display = 'none';
        return;
      }

      historicoDiv.style.display = 'block';
      acoes.style.display = 'flex';
      historicoList.innerHTML = '';

      // Ordenar por contador (maior para menor)
      const historicoOrdenado = [...historico].sort((a, b) => {
        return (contadores[b] || 1) - (contadores[a] || 1);
      });

      historicoOrdenado.forEach(nome => {
        const div = document.createElement('div');
        div.className = 'historico-item';
        div.innerHTML = `${nome}<small>(${contadores[nome] || 1}x)</small>`;
        div.onclick = () => mostrarPersonagem(nome);
        historicoList.appendChild(div);
      });
    }

    // ===== MOSTRAR PERSONAGEM ESPEC√çFICO =====
    function mostrarPersonagem(nome) {
      const p = personagens.find(pers => pers.nome === nome);
      if (p) {
        ultimoPersonagemSorteado = p;
        exibirResultado(p);
      }
    }

    // ===== EXIBIR RESULTADO =====
    function exibirResultado(p) {
      resultado.innerHTML = `
        <h2>${p.nome}</h2>
        <img src="${p.img}" alt="${p.nome}" class="mostrar">
      `;
    }



    // ===== LIMPAR HIST√ìRICO =====
    function limparHistorico() {
      if (confirm('Deseja realmente limpar o hist√≥rico?')) {
        historico = [];
        contadores = {};
        salvarDados();
        atualizarHistoricoVisual();
      }
    }

    // ===== FUN√á√ÉO PRINCIPAL =====
    /**
     * Sorteia um personnagem aleat√≥rio, evitando repeti√ß√£o consecutiva
     * Inclui anima√ß√£o de carregamento e tratamento de erros para imagens
     */
    function sortearPersonagem() {
      // Evita cliques m√∫ltiplos
      if (esta_sorteando) return;

      esta_sorteando = true;
      botao.disabled = true;
      resultado.innerHTML = '<div class="carregando">üé≤ Sorteando...</div>';

      // Simula delay para ter melhor feedback visual
      setTimeout(() => {
        let indexAleatorio;
        let tentativas = 0;
        const maxTentativas = 30;

        // Seleciona um √≠ndice aleat√≥rio evitando os 10 √∫ltimos
        do {
          indexAleatorio = Math.floor(Math.random() * personagens.length);
          tentativas++;
        } while (historico.includes(personagens[indexAleatorio].nome) && historico.length >= historicoMaximo && tentativas < maxTentativas);

        const p = personagens[indexAleatorio];
        ultimoPersonagemSorteado = p;

        // Criar elemento de imagem e aguardar carregamento
        const img = new Image();
        img.onload = () => {
          // Atualizar hist√≥rico
          if (!historico.includes(p.nome)) {
            historico.unshift(p.nome);
            if (historico.length > historicoMaximo) {
              historico.pop();
            }
          }
          contadores[p.nome] = (contadores[p.nome] || 0) + 1;
          salvarDados();
          atualizarHistoricoVisual();

          // Exibir resultado com efeito
          exibirResultado(p);
          
          // Anima confete
          lancarConfete();
          
          
          esta_sorteando = false;
          botao.disabled = false;
        };

        img.onerror = () => {
          // Erro ao carregar imagem
          resultado.innerHTML = `
            <h2>${p.nome}</h2>
            <div class="erro">‚ö†Ô∏è N√£o foi poss√≠vel carregar a imagem</div>
          `;
          esta_sorteando = false;
          botao.disabled = false;
        };

        // Inicia carregamento da imagem
        img.src = p.img;
      }, 800);
    }

    // ===== FUN√á√ÉO DE CONFETE =====
    /**
     * Lan√ßa confete animado quando um personagem √© sorteado
     */
    function lancarConfete() {
      // Confete do lado esquerdo
      confetti({
        particleCount: 100,
        angle: 60,
        spread: 55,
        origin: { x: 0, y: 0.5 }
      });

      // Confete do lado direito
      confetti({
        particleCount: 100,
        angle: 120,
        spread: 55,
        origin: { x: 1, y: 0.5 }
      });

      // Confete do centro caindo para baixo
      confetti({
        particleCount: 80,
        angle: 90,
        spread: 60,
        origin: { x: 0.5, y: 0 },
        colors: ['#ff3d00', '#ffd700', '#ff6e40', '#4CAF50', '#2196F3']
      });
    }

    // ===== EVENT LISTENERS =====
    botao.addEventListener("click", sortearPersonagem);
    btnLimparHistorico.addEventListener("click", limparHistorico);

    // Atalho de teclado - ENTER
    document.addEventListener('keydown', (event) => {
      if (event.key === 'Enter' && !botao.disabled) {
        sortearPersonagem();
      }
    });

    // Carregar dados ao abrir
    carregarDados();
    atualizarHistoricoVisual();
  </script>
</body>
</html>

  